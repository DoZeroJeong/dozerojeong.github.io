---
layout: post
title: Oracle Database 11g Memory Architecture
---

## Oracle Database System
오라클 데이터베이스 시스템은 두가지 영역으로 나뉜다.
- 데이터베이스
    - 실제 데이터가 저장되는 공간이다
- 인스턴스
    - DBMS가 작동하기 위한 서버 프로세스, 또는 백그라운드 프로세스이다.

인스턴스가 생성된다면 이는 하나 이상의 DBMS 프로세스가 작동을 시작했다는 뜻이다.

## 인스턴스
인스턴스는 다시 두가지로 나뉜다.

- SGA
    - 인스턴스가 생성될 때 할당되는 공유 메모리 영역으로 다수의 서버 프로세스들이 함께 사용한다.
- PGA
    - 서버 프로세스마다 가지고 있는 자체적인 메모리 영역으로 다른 프로세스와 공유하지 않는다.

서버 인스턴스 하나가 시작되면, 오라클 데이터베이스는 해당 인스턴스를 특정 데이터베이스와 연결한다. 이를 데이터베이스 마운트(Mount)라고 한다.

인스턴스는 하나의 데이터베이스와만 연관되어야 하며, 만약 3개의 데이터베이스를 운영하고자 한다면 데이터베이스 3개 + 인스턴스 3개로 구성이 이루어진다.

## SGA(System Global Area)의 구조

SGA구조는 다음과 같다.

- 데이터베이스 버퍼 캐시(Database Buffer Cache, DBC)
    - 오라클 데이터베이스의 주 메모리 공간으로, 특정 데이터를 사용하고자 할 경우에는 가장 먼저 DBC에서 탐색을 시작한다.
- Redo 로그 버퍼
    - 데이터 변경 시 생성되는 로그를 저장해 두는 메모리 공간이며, 원형의 순환 버퍼 형태로 이루어져 있다.
- 공유 풀
    - SQL 쿼리를 실행하는데 필요한 구문분석 정보를 저장하는 메모리 공간이다.
- 고정 SGA
    - 오라클 데이터베이스가 내부적으로 관리하는 영역으로, 오라클 데이터베이스 인스턴스의 상태, 백그라운드 프로세스가 처리해야하는 버퍼 메모리 등의 정보를 담고 있다.
- 대규모 풀
    - 오라클 데이터베이스의 대규모 메모리 할당을 위한 영역으로 대규모 풀 내부에는 요청 큐(Request Queue)와 응답 큐(Response Queue)가 존재하여 공유 풀의 부하를 감소시키는 효과가 있다.
- Java 풀
    - Java 코드를 실행하기 위해 할당되는 공간
- 스트림 풀
    - 2개 이상의 데이터베이스를 동기화하는데 사용되는 오라클 스트림(Oracle Streams)을 위한 공간

이 중에서 오라클 데이터베이스 동작에 반드시 필요한 SGA는 데이터베이스 버퍼 캐시, Redo 로그 버퍼, 공유 풀, 고정 SGA로 대규모와 JAVA 풀은 선택적 SGA이다.

## PGA(Program Global Area)의 구조

PGA의 구조는 다음과 같다.

- SQL Work Areas
    - SortArea
        - Order by, Group by 등 정렬에 대한 SQL 쿼리를 처리하기 위한 영역이다.
    - HashArea
        - Hash Join을 수행하기 위한 영역이다.
    - Bitmap Merge Area
        - 비트맵 다수를 병합하는 역할이다.
- Session Memory
    - 클라이언트 프로세스로부터 SQL 쿼리를 전달받은 서버 프로세스가 자신에게 작업을 요청한 세션을 저장하는 영역이다.
- Private SQL Area
    - Bind 변수가 저장되는 공간이다.
- Runtime Area
<<<<<<< HEAD
    - SQL 쿼리의 상태 정보와 SQL 쿼리 실행 중 처리되어야 할 데이터의 임시 저장 공간이다.
=======
    - SQL 쿼리의 상태 정보와 SQL 쿼리 실행 중 처리되어야 할 데이터의 임시 저장 공간이다.
>>>>>>> a5ca61b8425f04cd04d25d0684eec50802f4d2c3
